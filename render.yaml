services:
  - type: web
    name: moz-battlegrounds
    runtime: node
    plan: free
    buildCommand: npm ci --include=dev && npm run build-prod && npm run build:server
    startCommand: npm run start:render
    healthCheckPath: /api/env
    envVars:
      - key: GAME_ENV
        value: render
      - key: NODE_ENV
        value: production
      # Cloudflare R2 for replay storage (add values in Render dashboard)
      - key: CF_ACCOUNT_ID
        sync: false
      - key: R2_ACCESS_KEY
        sync: false
      - key: R2_SECRET_KEY
        sync: false
      - key: R2_BUCKET
        sync: false
